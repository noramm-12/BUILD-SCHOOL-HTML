!function(a){"use strict";var b={write:function(a,b,c,d,e){var f=new Date;c=c||730,e=e||"/",f.setTime(f.getTime()+24*c*60*60*1e3);var g="; expires="+f.toGMTString(),h=a+"="+b+g+"; path="+e+"; SameSite=None; Secure";d&&(h+="; domain="+d),document.cookie=h},read:function(a){var b=""+document.cookie,c=b.indexOf(a);if(void 0===a||""===a||-1===c)return"";var d=b.indexOf(";",c);return-1==d&&(d=b.length),unescape(b.substring(c+a.length+1,d))},remove:function(a){this.read(a)&&this.write(a,"",-1,"/")}},c=a.encodeURIComponent,d=a.decodeURIComponent,e=function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)","i"),d=c.exec(b);return null===d?"":decodeURIComponent(d[1].replace(/\+/g," "))},f=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),g=function(a){return a+"-"+Math.floor(1*new Date/100)},h=function(a,b){var c=document.createElement("script"),d=document.getElementsByTagName("script")[0];c.type="text/javascript",c.src=a,b&&(c.onreadystatechange=function(){"complete"===this.readyState&&b()},c.onload=b),d.appendChild(c)},i=function(a){try{document.cookie="cookietest=1"+(a?"; domain="+a:"");var b=-1!=document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"+(a?"; domain="+a:""),b}catch(a){return!1}},j=function(a,b,c){var d=new Image;d.src=a,b&&(d.onload=b),c&&(d.onerror=c)},k=function(a,b,c){var d=new XMLHttpRequest;try{d.timeout=1e4}catch(a){console.log(a)}d.withCredentials=!0,d.onreadystatechange=function(){4===d.readyState&&200===d.status&&void 0!==b?b(d.responseText):4===d.readyState&&void 0!==c&&c(d.responseText)},d.open("GET",a,!0),d.send()},l=function(a,b){if(a){var c=document.createElement("iframe"),d=document.getElementsByTagName("body")[0];c.style.display="none",c.src=a,b&&(c.onload=b),d.appendChild(c)}},m={setCallback:function(a){var c=JSON.parse(a);void 0!==c&&void 0!==c[R]&&("0"!==c[R]&&b.write(Q,c[R],U,C),b.write(V,c[S],U,C)),n.sync(a)},setErrorCallback:function(a){n.sync(a)}},n={syncCallback:function(a){b.write(T,(new Date).getTime(),U,C)},sync:function(a){var c=parseInt(b.read(T));isNaN(c)||(c=new Date(c),c=new Date(c.setDate(c.getDate()+U)));var d="1"===b.read(V);if((isNaN(c)||c<new Date)&&d)for(var e in v)switch(console.log("4"),v[e].type){case"ajax":k(v[e].sync()+"?"+u[t[1]]+"?id="+v[e].id+"&extuid="+v[e].macro,this.syncCallback);break;case"image":j(v[e].sync()+"?"+u[t[1]]+"?id="+v[e].id+"&extuid="+v[e].macro,this.syncCallback)}}},o=function(b){void 0===b&&(b=location.href);try{var c;if(a.URL&&(c=new URL(b).hostname),void 0===c){var d=document.createElement("a");d.href=b,c=d.hostname}if("localhost"===c)return"";for(var e=c.split("."),f=e.length,g=e[f-2]+"."+e[f-1],h=f-2;!i(g)&&h>=0;)g=e[--h]+"."+g;return!(h<0)&&g}catch(a){return!1}},p=function(a,b,c){if(null===b||0===b.length)return a;if(null===c||0===c.length)return a;if(void 0===a||0===a.length)return"?"+b+"="+c;var d=e(b,a);return 0!==d.length?a.replace(b+"="+d,b+"="+c):a.indexOf("?")>=0?a+"&"+b+"="+c:a+"?"+b+"="+c},q="https:"===a.location.protocol,r=(q?"https":"http")+"://tags-dmp.vpadn.com/",s=(q?"https":"http")+"://ids-dmp.vpadn.com/",t={0:"create",1:"mapUser",999:"others"},u=[],v=[{sync:function(){return"https://secure.adnxs.com/getuid"},id:1,macro:"$UID",type:"image"}];u[t[0]]=s+"set",u[t[1]]=s+"map",u[t[999]]=r+"et";var w,x,y,z,A,B,C,D,E,F,G,H="j",I="1.2.0",J="vpadn-ctid",K="_vpctid",L="vpadn-seid",M=730,N=30/1440,O=document.referrer,P=3,Q="vpadn-vpid",R="vponId",S="ce",T="vpadn-sd",U=7,V="vpadn-ce";w=function(){return Y.apply(null,arguments),!1};var W=function(b){var c=b;try{var d=new RegExp(a.VPADN_CORS_track.join("|")),e=document.createElement("a");e.href=b,d.test(e.host)&&(e.search=p(e.search,K,A),x&&console.log("[Vpadn: CORS href modified - "+e.search.href)),c=e.href}catch(a){x&&console.log("[Vpadn: reviseCORSUrl error]",a.stack)}return c},X={reviseCORSUrl:W};a.Vpadn_util=X,a.addEventListener("load",function(){l("//m.vpadn.com/dsp/vpadn-cookie_sync.html")});var Y=function(){var a=arguments,e=1*new Date,f=a[0],h=a[1]||{},i=a[2]||"",k=null,l=null;"function"==typeof h.hitCallback&&(k=h.hitCallback,delete h.hitCallback),"function"==typeof h.errorCallback&&(l=h.errorCallback,delete h.errorCallback);var m="t="+e+"&seid="+B+"&sdkn="+H+"&sdkv="+I+"&lk="+y+"&en="+c(z)+"&ctid="+A+"&ev="+f+"&pl="+c(JSON.stringify(h));if(m+=i?"&cuid="+i:"",m+=(D?"&gaid="+D:"")+(E?"&idfa="+E:"")+(F?"&cid="+F:"")+(G?"&src="+G:""),f===t[0])$.apply(this,a);else if(b.write(L,b.read(L)||g(y),N,C),x){var n=d(m).split("&");console.log("[Vpadn: "+a[0]+"]"),console.log("\t"+n.join("\n\r\t")),k&&(console.log("[Vpadn: hitCallback]"),k())}else j(u[t[999]]+"?"+m,k,l)},Z=function(){for(var b in a.Vpadn.q)a.Vpadn.q.hasOwnProperty(b)&&w.apply(this,Vpadn.q[b]);if(a.Vpadn=w,a.VPADN_CORS_track)try{a.addEventListener("load",function(){for(var b=document.body.getElementsByTagName("a"),c=new RegExp(a.VPADN_CORS_track.join("|")),d=0;d<b.length;d++){var e=b[d].hostname;x&&(console.log("-------------------"),console.log("[Vpadn: CORS href: "+b[d].href),console.log("[Vpadn: CORS hostname: "+e)),c.test(e)&&(b[d].search=p(b[d].search,K,A),x&&console.log("[Vpadn: CORS href modified - "+b[d].href))}})}catch(a){x&&console.log("[Vpadn: vpon cross domain tracking not set, err:"+a.stack+"]")}x&&console.log("[Vpadn: finish init]"),a.VPADN_onInit&&(a.VPADN_onInit(),a.VPADN_onInit=null)},$=function(){var d=arguments;y=d[1],d[2]=d[2]||{},C=d[2].cookieDomain||o(),x=!!d[2].debug,z=d[2].encoding||document.characterSet||document.charset;var h=e(K,location.href);if(x&&h.length>0&&console.log("[Vpadn: ctid synced]"),A=h||b.read(J)||f(),b.write(J,A,M,C),B=b.read(L),B&&o(O)===C&&new RegExp("^"+y).test(B)||(B=g(y)),b.write(L,B,N,C),e("vpadn_cid",location.href)?F=e("vpadn_cid",location.href):e("_vpadid",location.href)||e("_vpbid",location.href)?(D=e("_vpgaid",location.href),E=e("_vpidfa",location.href),F="1."+e("_vpbid",location.href)+"."+e("_vpcid",location.href)+"."+e("_vpadid",location.href),D&&b.write("vpadn-dg",D,730,C),E&&b.write("vpadn-di",E,730,C),b.write("vpadn-"+y+"-src",G,P,C),b.write("vpadn-"+y+"-cid",F,3,C)):F=b.read("vpadn-"+y+"-cid"),null===(G=e("vpadn_src",location.href)||e("vpadn-src",location.href))||0===G.length){var j=e("utm_source",location.href),l=e("utm_medium",location.href);(j||l)&&(G=j+"_"+l)}G?b.write("vpadn-"+y+"-src",G,P,C):G=b.read("vpadn-"+y+"-src"),D=b.read("vpadn-dg"),E=b.read("vpadn-di"),x?(console.log('[Vpadn: Create Tracker with License Key "'+y+'"]'),i()||console.log("Unfortunately =( your browser isn't allow to write cookies, therefore vpon tracking sdk will not work correctly, please open the permission or contact vpon MI team!")):"0"!==b.read(V)&&k(u[t[0]]+"?t="+1*new Date+"&dn="+c(C)+"&ctid="+A,m.setCallback,m.setErrorCallback),a.VPADN_onInit=d[2].onInit,d[2].CORS_track&&Array.isArray(d[2].CORS_track)&&(a.VPADN_CORS_track=d[2].CORS_track,x&&console.log("[Vpadn: VPADN_CORS_track enabled]"))};if(Array.prototype.indexOf&&Array.prototype.lastIndexOf)Z();else{h("//cdnjs.cloudflare.com/ajax/libs/es5-shim/4.1.0/es5-shim.min.js",Z)}}(window);